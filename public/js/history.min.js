!function($){$("document").ready(function(){var a=function(a){var b,c,d={};if(""===a)return{};for(b=0;b<a.length;++b)c=a[b].split("="),2===c.length&&(d[c[0]]=c[1].indexOf(",")>-1?c[1].split(","):decodeURIComponent(c[1].replace(/\+/g," ")));return d}(window.location.search.substr(1).split("&")),b=$("#map")[0],c=new google.maps.LatLng(32.98332409183747,-117.08404541015625),d={zoom:3,center:c,disableDefaultUI:!1,mapTypeControl:!1,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.LARGE,position:google.maps.ControlPosition.TOP_RIGHT},streetViewControl:!1},e=new google.maps.Map(b,d),f=new google.maps.OverlayView,g=[{elementType:"geometry",stylers:[{saturation:-100},{weight:.4}]},{featureType:"administrative.land_parcel",elementType:"all",stylers:[{visibility:"off"}]}],h=new google.maps.StyledMapType(g,{map:e,name:"Styled Map"}),i="1v-vUEe3wcApsZUug589sG_T3eop_fFEZivS0QMHR",j="1195ofpuopUS_AGnifU5LGMHD3nlNdpNYJPpOp9Ju",k="1rjSS-u8ftde3yZCdPsTVs5uoll6ckq_lElYzX3pG",l="1aJCQmwcj4gRWxpLpXErdBB0K0lSZdssMv-B3Hv3Z",m="1T8SXIdE0QVJG9lTHPHax3IMTozqXqR180iF1zjCo",n="1j9tR6R9akhne9VU3aPJlW6EcJ41fzn7_X8yW52LZ",o=function(){if("undefined"==typeof archiveYear)return i;switch(archiveYear){case"2013":return i;case"2012":return j;case"2011":return k;case"2010":return l;case"2009":return m;case"2008":return n;default:return i}},p=a.mag?"'mag' >= '"+a.mag[0]+"' and 'mag' <= '"+a.mag[1]+"'":void 0,q=a.date?a.date instanceof Array?a.date[0]===a.date[1]?"'date' = '"+a.date[0]+"/"+archiveYear+"'":"'date' >= '"+a.date[0]+"/"+archiveYear+"' AND 'date' <= '"+a.date[1]+"/"+archiveYear+"'":"'date' >= '"+a.date+"/"+archiveYear+"'":void 0,r=[p,q].filter(function(a){return void 0!==a}),s=r.join(1===r.length?"":" and "),t=new google.maps.FusionTablesLayer({query:{select:"latitude",from:o(),where:s},heatmap:{enabled:"true"===a.heatmap?!0:!1}});t.setMap(e),e.mapTypes.set("map-style",h),e.setMapTypeId("map-style"),f.setMap(e),f.draw=function(){}})}(jQuery);